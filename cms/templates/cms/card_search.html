{% extends "cms/base.html" %}

{% block title %}カードの一覧{% endblock title %}

{% block content %}
    <h4 class="mt-4 border-bottom">カード一覧</h4>

    <div class="d-flex flex-wrap">

      <!-- ソートボタン -->
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">
          並び替えの条件を指定
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          <!-- プルダウンの条件指定の中身 -->
          <li role="presentation"><a href="#">追加日順</a></li>
          <li role="presentation"><a href="#">タグの関連性順に</a></li>
          <li role="presentation"><a href="#">五十音順</a></li>
        </ul>
      </div>

      <form method="get">
        {{ filter.form.as_p }}
        <input type="submit" value="並び替え"/>
      </form>
      {% for obj in filter.qs %}
        {{ obj.title }} - ${{ obj.tags }}<br />
      {% endfor %}

    </div>

    <div class="d-flex flex-wrap">

      {% for card in object_list %}
      <div class="my-3 mx-2 border rounded-lg w-25 h-100">
        <a href="{% url 'cms:card_detail' card_id=card.id %}" class="text-dark text-decoration-none ">
          <div class="text-center text-dark py-3 border border-secondary rounded-lg btn btn-outline-light">
            <p>{{ card.title }}</p>
            <p>{{ card.subtitle }}</p>
            <div class="mx-auto px-3 h-25">
              <img class="rounded w-100" src={{card.tecimg.url}}>
            </div>
            <p>{{ card.tec_desc }}</p>
            <p>{{ card.desc1 }}</p>
            <p>{{ card.desc2 }}</p>
            <p>{{ card.desc3 }}</p>
          </div>
        </a>
        {% csrf_token %}
        <div class="text-center my-3">
          <p>{{ card.tag_list }}</p>
          <a href="{% url 'cms:card_mod' card_id=card.id %}" class="btn btn-outline-primary btn-sm">修正</a>
          <a href="{% url 'cms:card_del' card_id=card.id %}" class="btn btn-outline-danger btn-sm">削除</a>
        </div>
      </div>
      {% endfor %}


      <div>
        <div class="justify-content-center my-auto mx-auto">
          <a href="{% url 'cms:card_add' %}" class="btn btn-primary btn-sm my-3">追加</a>
        </div>
      </div>
    </div>
{% endblock content %}